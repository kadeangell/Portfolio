const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ghostty-web-C7jND9ev.js","assets/main-B0N9azBj.js","assets/main-BvWLuJuU.css"])))=>i.map(i=>d[i]);
import{d as b,e as xe,r as h,u as Re,a as Te,b as Ie,w as Ae,_ as Ce,j,c as Me}from"./main-B0N9azBj.js";function Ne(){if(typeof window>"u"||!window.GestureEvent)return 50;try{const t=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(t[1])>=17?120:320}catch{return 320}}function Ke(t){return{method:"throttle",timeMs:t}}const X=Ke(Ne());function Fe(t){return t===null||Array.isArray(t)&&t.length===0}function Qe(t,e,s){if(typeof t=="string")s.set(e,t);else{s.delete(e);for(const n of t)s.append(e,n);s.has(e)||s.set(e,"")}return s}function ke(){const t=new Map;return{on(e,s){const n=t.get(e)||[];return n.push(s),t.set(e,n),()=>this.off(e,s)},off(e,s){const n=t.get(e);n&&t.set(e,n.filter(r=>r!==s))},emit(e,s){t.get(e)?.forEach(n=>n(s))}}}function ae(t,e,s){function n(){t(),s.removeEventListener("abort",i)}const r=setTimeout(n,e);function i(){clearTimeout(r),s.removeEventListener("abort",i)}s.addEventListener("abort",i)}function he(){const t=Promise;if(Promise.hasOwnProperty("withResolvers"))return Promise.withResolvers();let e=()=>{},s=()=>{};return{promise:new t((n,r)=>{e=n,s=r}),resolve:e,reject:s}}function Ve(t,e){let s=e;for(let n=t.length-1;n>=0;n--){const r=t[n];if(!r)continue;const i=s;s=()=>r(i)}s()}function fe(){return new URLSearchParams(location.search)}var Be=class{updateMap=new Map;options={history:"replace",scroll:!1,shallow:!0};timeMs=X.timeMs;transitions=new Set;resolvers=null;controller=null;lastFlushedAt=0;resetQueueOnNextPush=!1;push({key:t,query:e,options:s},n=X.timeMs){this.resetQueueOnNextPush&&(this.reset(),this.resetQueueOnNextPush=!1),b("[nuqs gtq] Enqueueing %s=%s %O",t,e,s),this.updateMap.set(t,e),s.history==="push"&&(this.options.history="push"),s.scroll&&(this.options.scroll=!0),s.shallow===!1&&(this.options.shallow=!1),s.startTransition&&this.transitions.add(s.startTransition),(!Number.isFinite(this.timeMs)||n>this.timeMs)&&(this.timeMs=n)}getQueuedQuery(t){return this.updateMap.get(t)}getPendingPromise({getSearchParamsSnapshot:t=fe}){return this.resolvers?.promise??Promise.resolve(t())}flush({getSearchParamsSnapshot:t=fe,rateLimitFactor:e=1,...s},n){if(this.controller??=new AbortController,!Number.isFinite(this.timeMs))return b("[nuqs gtq] Skipping flush due to throttleMs=Infinity"),Promise.resolve(t());if(this.resolvers)return this.resolvers.promise;this.resolvers=he();const r=()=>{this.lastFlushedAt=performance.now();const[o,c]=this.applyPendingUpdates({...s,autoResetQueueOnUpdate:s.autoResetQueueOnUpdate??!0,getSearchParamsSnapshot:t},n);c===null?(this.resolvers.resolve(o),this.resetQueueOnNextPush=!0):this.resolvers.reject(o),this.resolvers=null};return ae(()=>{const o=performance.now()-this.lastFlushedAt,c=this.timeMs,l=e*Math.max(0,c-o);b("[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)",l,c,e),l===0?r():ae(r,l,this.controller.signal)},0,this.controller.signal),this.resolvers.promise}abort(){return this.controller?.abort(),this.controller=new AbortController,this.resolvers?.resolve(new URLSearchParams),this.resolvers=null,this.reset()}reset(){const t=Array.from(this.updateMap.keys());return b("[nuqs gtq] Resetting queue %s",JSON.stringify(Object.fromEntries(this.updateMap))),this.updateMap.clear(),this.transitions.clear(),this.options={history:"replace",scroll:!1,shallow:!0},this.timeMs=X.timeMs,t}applyPendingUpdates(t,e){const{updateUrl:s,getSearchParamsSnapshot:n}=t;let r=n();if(b("[nuqs gtq] Applying %d pending update(s) on top of %s",this.updateMap.size,r.toString()),this.updateMap.size===0)return[r,null];const i=Array.from(this.updateMap.entries()),o={...this.options},c=Array.from(this.transitions);t.autoResetQueueOnUpdate&&this.reset(),b("[nuqs gtq] Flushing queue %O with options %O",i,o);for(const[l,a]of i)a===null?r.delete(l):r=Qe(a,l,r);e&&(r=e(r));try{return Ve(c,()=>{s(r,o)}),[r,null]}catch(l){return console.error(xe(429),i.map(([a])=>a).join(),l),[r,l]}}};const te=new Be;function Le(t,e,s){const n=h.useCallback(()=>{const i=Object.fromEntries(t.map(o=>[o,s(o)]));return[JSON.stringify(i),i]},[t.join(","),s]),r=h.useRef(null);return r.current===null&&(r.current=n()),h.useSyncExternalStore(h.useCallback(i=>{const o=t.map(c=>e(c,i));return()=>o.forEach(c=>c())},[t.join(","),e]),()=>{const[i,o]=n();return r.current[0]===i?r.current[1]:(r.current=[i,o],o)},()=>r.current[1])}var Ue=class{callback;resolvers=he();controller=new AbortController;queuedValue=void 0;constructor(t){this.callback=t}abort(){this.controller.abort(),this.queuedValue=void 0}push(t,e){return this.queuedValue=t,this.controller.abort(),this.controller=new AbortController,ae(()=>{const s=this.resolvers;try{b("[nuqs dq] Flushing debounce queue",t);const n=this.callback(t);b("[nuqs dq] Reset debounce queue %O",this.queuedValue),this.queuedValue=void 0,this.resolvers=he(),n.then(r=>s.resolve(r)).catch(r=>s.reject(r))}catch(n){this.queuedValue=void 0,s.reject(n)}},e,this.controller.signal),this.resolvers.promise}},He=class{throttleQueue;queues=new Map;queuedQuerySync=ke();constructor(t=new Be){this.throttleQueue=t}useQueuedQueries(t){return Le(t,(e,s)=>this.queuedQuerySync.on(e,s),e=>this.getQueuedQuery(e))}push(t,e,s,n){if(!Number.isFinite(e)){const o=s.getSearchParamsSnapshot??fe;return Promise.resolve(o())}const r=t.key;if(!this.queues.has(r)){b("[nuqs dqc] Creating debounce queue for `%s`",r);const o=new Ue(c=>(this.throttleQueue.push(c),this.throttleQueue.flush(s,n).finally(()=>{this.queues.get(c.key)?.queuedValue===void 0&&(b("[nuqs dqc] Cleaning up empty queue for `%s`",c.key),this.queues.delete(c.key)),this.queuedQuerySync.emit(c.key)})));this.queues.set(r,o)}b("[nuqs dqc] Enqueueing debounce update %O",t);const i=this.queues.get(r).push(t,e);return this.queuedQuerySync.emit(r),i}abort(t){const e=this.queues.get(t);return e?(b("[nuqs dqc] Aborting debounce queue %s=%s",t,e.queuedValue?.query),this.queues.delete(t),e.abort(),this.queuedQuerySync.emit(t),s=>(s.then(e.resolvers.resolve,e.resolvers.reject),s)):s=>s}abortAll(){for(const[t,e]of this.queues.entries())b("[nuqs dqc] Aborting debounce queue %s=%s",t,e.queuedValue?.query),e.abort(),e.resolvers.resolve(new URLSearchParams),this.queuedQuerySync.emit(t);this.queues.clear()}getQueuedQuery(t){const e=this.queues.get(t)?.queuedValue?.query;return e!==void 0?e:this.throttleQueue.getQueuedQuery(t)}};const ne=new He(te);function ze(t,e){return t===e?!0:t===null||e===null||typeof t=="string"||typeof e=="string"||t.length!==e.length?!1:t.every((s,n)=>s===e[n])}function Se(t,e,s){try{return t(e)}catch(n){return Ae("[nuqs] Error while parsing value `%s`: %O"+(s?" (for key `%s`)":""),e,n,s),null}}function K(t){function e(s){if(typeof s>"u")return null;let n="";if(Array.isArray(s)){if(s[0]===void 0)return null;n=s[0]}return typeof s=="string"&&(n=s),Se(t.parse,n)}return{type:"single",eq:(s,n)=>s===n,...t,parseServerSide:e,withDefault(s){return{...this,defaultValue:s,parseServerSide(n){return e(n)??s}}},withOptions(s){return{...this,...s}}}}const We=K({parse:t=>t,serialize:String});K({parse:t=>{const e=parseInt(t);return e==e?e:null},serialize:t=>""+Math.round(t)});K({parse:t=>{const e=parseInt(t);return e==e?e-1:null},serialize:t=>""+Math.round(t+1)});K({parse:t=>{const e=parseInt(t,16);return e==e?e:null},serialize:t=>{const e=Math.round(t).toString(16);return(e.length&1?"0":"")+e}});K({parse:t=>{const e=parseFloat(t);return e==e?e:null},serialize:String});K({parse:t=>t.toLowerCase()==="true",serialize:String});function pe(t,e){return t.valueOf()===e.valueOf()}K({parse:t=>{const e=parseInt(t);return e==e?new Date(e):null},serialize:t=>""+t.valueOf(),eq:pe});K({parse:t=>{const e=new Date(t);return e.valueOf()==e.valueOf()?e:null},serialize:t=>t.toISOString(),eq:pe});K({parse:t=>{const e=new Date(t.slice(0,10));return e.valueOf()==e.valueOf()?e:null},serialize:t=>t.toISOString().slice(0,10),eq:pe});const ie=ke(),Ge={};function Je(t,e={}){const s=h.useId(),n=Re(),r=Te(),{history:i="replace",scroll:o=n?.scroll??!1,shallow:c=n?.shallow??!0,throttleMs:l=X.timeMs,limitUrlUpdates:a=n?.limitUrlUpdates,clearOnDefault:k=n?.clearOnDefault??!0,startTransition:B,urlKeys:q=Ge}=e,w=Object.keys(t).join(","),y=h.useMemo(()=>Object.fromEntries(Object.keys(t).map(p=>[p,q[p]??p])),[w,JSON.stringify(q)]),P=Ie(Object.values(y)),R=P.searchParams,I=h.useRef({}),F=h.useMemo(()=>Object.fromEntries(Object.keys(t).map(p=>[p,t[p].defaultValue??null])),[Object.values(t).map(({defaultValue:p})=>p).join(",")]),A=ne.useQueuedQueries(Object.values(y)),[V,N]=h.useState(()=>oe(t,q,R??new URLSearchParams,A).state),_=h.useRef(V);if(b("[nuq+ %s `%s`] render - state: %O, iSP: %s",s,w,V,R),Object.keys(I.current).join("&")!==Object.values(y).join("&")){const{state:p,hasChanged:m}=oe(t,q,R,A,I.current,_.current);m&&(b("[nuq+ %s `%s`] State changed: %O",s,w,{state:p,initialSearchParams:R,queuedQueries:A,queryRef:I.current,stateRef:_.current}),_.current=p,N(p)),I.current=Object.fromEntries(Object.entries(y).map(([x,u])=>[u,t[x]?.type==="multi"?R?.getAll(u):R?.get(u)??null]))}h.useEffect(()=>{const{state:p,hasChanged:m}=oe(t,q,R,A,I.current,_.current);m&&(b("[nuq+ %s `%s`] State changed: %O",s,w,{state:p,initialSearchParams:R,queuedQueries:A,queryRef:I.current,stateRef:_.current}),_.current=p,N(p))},[Object.values(y).map(p=>`${p}=${R?.getAll(p)}`).join("&"),JSON.stringify(A)]),h.useEffect(()=>{const p=Object.keys(t).reduce((m,x)=>(m[x]=({state:u,query:f})=>{N(d=>{const{defaultValue:S}=t[x],D=y[x],T=u??S??null,O=d[x]??S??null;return Object.is(O,T)?(b("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O",s,w,D,u,S,_.current),d):(_.current={..._.current,[x]:T},I.current[D]=f,b("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O",s,w,D,u,S,_.current),_.current)})},m),{});for(const m of Object.keys(t)){const x=y[m];b("[nuq+ %s `%s`] Subscribing to sync for `%s`",s,x,w),ie.on(x,p[m])}return()=>{for(const m of Object.keys(t)){const x=y[m];b("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",s,x,w),ie.off(x,p[m])}}},[w,y]);const Z=h.useCallback((p,m={})=>{const x=Object.fromEntries(Object.keys(t).map(O=>[O,null])),u=typeof p=="function"?p(ye(_.current,F))??x:p??x;b("[nuq+ %s `%s`] setState: %O",s,w,u);let f,d=0,S=!1;const D=[];for(let[O,g]of Object.entries(u)){const v=t[O],M=y[O];if(!v||g===void 0)continue;(m.clearOnDefault??v.clearOnDefault??k)&&g!==null&&v.defaultValue!==void 0&&(v.eq??((E,J)=>E===J))(g,v.defaultValue)&&(g=null);const G=g===null?null:(v.serialize??String)(g);ie.emit(M,{state:g,query:G});const C={key:M,query:G,options:{history:m.history??v.history??i,shallow:m.shallow??v.shallow??c,scroll:m.scroll??v.scroll??o,startTransition:m.startTransition??v.startTransition??B}};if(m?.limitUrlUpdates?.method==="debounce"||a?.method==="debounce"||v.limitUrlUpdates?.method==="debounce"){C.options.shallow===!0&&console.warn(xe(422));const E=m?.limitUrlUpdates?.timeMs??a?.timeMs??v.limitUrlUpdates?.timeMs??X.timeMs,J=ne.push(C,E,P,r);d<E&&(f=J,d=E)}else{const E=m?.limitUrlUpdates?.timeMs??v?.limitUrlUpdates?.timeMs??a?.timeMs??m.throttleMs??v.throttleMs??l;D.push(ne.abort(M)),te.push(C,E),S=!0}}const T=D.reduce((O,g)=>g(O),S?te.flush(P,r):te.getPendingPromise(P));return f??T},[w,i,c,o,l,a?.method,a?.timeMs,B,y,P.updateUrl,P.getSearchParamsSnapshot,P.rateLimitFactor,r,F]);return[h.useMemo(()=>ye(V,F),[V,F]),Z]}function oe(t,e,s,n,r,i){let o=!1;const c=Object.entries(t).reduce((l,[a,k])=>{const B=e?.[a]??a,q=n[B],w=k.type==="multi"?[]:null,y=q===void 0?(k.type==="multi"?s?.getAll(B):s?.get(B))??w:q;return r&&i&&ze(r[B]??w,y)?(l[a]=i[a]??null,l):(o=!0,l[a]=(Fe(y)?null:Se(k.parse,y,B))??null,r&&(r[B]=y),l)},{});if(!o){const l=Object.keys(t),a=Object.keys(i??{});o=l.length!==a.length||l.some(k=>!a.includes(k))}return{state:c,hasChanged:o}}function ye(t,e){return Object.fromEntries(Object.keys(t).map(s=>[s,t[s]??e[s]??null]))}function Ye(t,e={}){const{parse:s,type:n,serialize:r,eq:i,defaultValue:o,...c}=e,[{[t]:l},a]=Je({[t]:{parse:s??(k=>k),type:n,serialize:r,eq:i,defaultValue:o}},c);return[l,h.useCallback((k,B={})=>a(q=>({[t]:typeof k=="function"?k(q[t]):k}),B),[t,a])]}function H(t,e){return{kind:"file",name:t,content:e}}function ue(t,e){const s={};for(const n of e)s[n.name]=n;return{kind:"dir",name:t,children:s}}const se=ue("/",[H("about.txt",`Hello! I'm Kade Angell.
Welcome to my portfolio.
`),H("resume.txt",`Resume placeholder — content coming soon.
`),ue("projects",[H("portfolio.txt",`portfolio — this terminal-based portfolio site.
Built with React, TypeScript, and ghostty-web.
`),H("zaymo.txt",`zaymo — placeholder project description.
`)]),ue("links",[H("github.txt",`https://github.com/kadeangell
`),H("linkedin.txt",`https://linkedin.com/in/kadeangell
`)])]),de="vfs:";function Q(t,e){if(e==="~"||e==="")return"/";const s=e.startsWith("/")?e.split("/"):[...t.split("/"),...e.split("/")],n=[];for(const r of s)r===""||r==="."||(r===".."?n.pop():n.push(r));return"/"+n.join("/")}function L(t){if(t==="/")return se;const e=t.split("/").filter(Boolean);let s=se;for(const n of e){if(s.kind!=="dir")return;const r=s.children[n];if(!r)return;s=r}return s}function qe(t){const e=L(t);return!e||e.kind!=="dir"?null:Object.keys(e.children)}function _e(t){const e=L(t);return!e||e.kind!=="file"?null:e.content}function De(t){const e=L(t);return e!==void 0&&e.kind==="dir"}function ve(t,e){const s=t.split("/").filter(Boolean),n=s.pop();if(!n)return!1;let r=se;for(const o of s){if(r.kind!=="dir")return!1;let c=r.children[o];if(!c){const l={kind:"dir",name:o,children:{}};r.children[o]=l,c=l}if(c.kind!=="dir")return!1;r=c}if(r.kind!=="dir")return!1;const i=r.children[n];if(i&&i.kind==="dir")return!1;r.children[n]={kind:"file",name:n,content:e};try{localStorage.setItem(de+t,e)}catch{}return!0}function Xe(t,e){const s=t.split("/").filter(Boolean),n=s.pop();if(!n)return;let r=se;for(const i of s){if(r.kind!=="dir")return;let o=r.children[i];if(!o){const c={kind:"dir",name:i,children:{}};r.children[i]=c,o=c}if(o.kind!=="dir")return;r=o}r.kind==="dir"&&(r.children[n]={kind:"file",name:n,content:e})}function Ze(){try{for(let t=0;t<localStorage.length;t++){const e=localStorage.key(t);if(!e?.startsWith(de))continue;const s=e.slice(de.length),n=localStorage.getItem(e);n!==null&&Xe(s,n)}}catch{}}Ze();const $=new Map;$.set("help",(t,e)=>{e.write(`\r
Available commands:\r
`),e.write(`  help     Show this message\r
`),e.write(`  clear    Clear the screen\r
`),e.write(`  echo     Print arguments\r
`),e.write(`  whoami   Display current user\r
`),e.write(`  date     Display current date\r
`),e.write(`  pwd      Print working directory\r
`),e.write(`  ls       List directory contents\r
`),e.write(`  cd       Change directory\r
`),e.write(`  cat      Print file contents\r
`),e.write(`  vim      Open file in Vim editor\r
`),e.write(`  rainbow  Test color output\r
`)});$.set("clear",(t,e,s)=>{s.clearHistory(),e.write("\x1B[2J\x1B[H")});$.set("echo",(t,e)=>{e.write(`\r
`+t.join(" "))});$.set("whoami",(t,e)=>{e.write(`\r
guest`)});$.set("date",(t,e)=>{e.write(`\r
`+new Date().toString())});$.set("pwd",(t,e,s)=>{e.write(`\r
`+s.cwd)});$.set("ls",(t,e,s)=>{const n=t[0]?Q(s.cwd,t[0]):s.cwd,r=qe(n);if(!r){e.write(`\r
ls: ${t[0]||n}: No such directory`);return}const i=L(n);if(!i||i.kind!=="dir")return;const o=[];for(const c of r)i.children[c].kind==="dir"?o.push(`\x1B[1;34m${c}/\x1B[0m`):o.push(c);e.write(`\r
`+o.join("  "))});$.set("cd",(t,e,s)=>{const n=t[0];if(!n||n==="~"){s.setCwd("/");return}const r=Q(s.cwd,n);if(!De(r)){e.write(`\r
cd: ${n}: No such directory`);return}s.setCwd(r)});$.set("cat",(t,e,s)=>{if(!t[0]){e.write(`\r
cat: missing file operand`);return}const n=Q(s.cwd,t[0]),r=L(n);if(!r){e.write(`\r
cat: ${t[0]}: No such file or directory`);return}if(r.kind==="dir"){e.write(`\r
cat: ${t[0]}: Is a directory`);return}const i=_e(n);i!==null&&e.write(`\r
`+i.replace(/\n/g,`\r
`))});$.set("rainbow",(t,e)=>{const n="\x1B[0m",r=[{code:"31",name:"red"},{code:"33",name:"yellow"},{code:"32",name:"green"},{code:"36",name:"cyan"},{code:"34",name:"blue"},{code:"35",name:"magenta"}];e.write(`\r
`);for(const i of r)e.write(`\x1B[${i.code}m${"█".repeat(8)}${n}`);e.write(`\r
`);for(const i of r)e.write(`\x1B[${i.code}m${i.name.padEnd(8)}${n}`);e.write(`\r
`);for(const i of r)e.write(`\x1B[${i.code};1m${"█".repeat(8)}${n}`);e.write(`\r
`),e.write(`\r
  256-color gradient:\r
  `);for(let i=196;i<=201;i++)e.write(`\x1B[38;5;${i}m██${n}`);for(let i=207;i>=202;i--)e.write(`\x1B[38;5;${i}m██${n}`);e.write(`\r
  `),e.write(`\r
  RGB true color:\r
  `);for(let i=0;i<48;i++){const o=i/48*360,[c,l,a]=et(o,100,50);e.write(`\x1B[38;2;${c};${l};${a}m█${n}`)}e.write(`\r
`)});function et(t,e,s){e/=100,s/=100;const n=o=>(o+t/30)%12,r=e*Math.min(s,1-s),i=o=>s-r*Math.max(-1,Math.min(n(o)-3,Math.min(9-n(o),1)));return[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)]}const me=(t,e,s)=>{const n=t[0];if(n){const r=Q(s.cwd,n);if(L(r)?.kind==="dir"){e.write(`\r
vim: ${n}: Is a directory`);return}}return s.runProcess("vim",t),"suppress-prompt"};$.set("vim",me);$.set("vi",me);$.set("nvim",me);function tt(t){return $.get(t)}function st(){return[...$.keys()]}class rt{inputBuffer="";cursorPos=0;writer;inputListeners=new Set;keybinds=new Map;escapeBuffer="";inEscapeSequence=!1;getContext=()=>({cwd:"/",setCwd:()=>{},clearHistory:()=>{},runProcess:()=>{}});onBeforePrompt=()=>{};onInputChange=()=>{};constructor(e){this.writer=e}setContextProvider(e){this.getContext=e}setBeforePromptCallback(e){this.onBeforePrompt=e}setInputChangeCallback(e){this.onInputChange=e}notifyInputChange(){this.onInputChange(this.inputBuffer,this.cursorPos)}printPrompt(){const e=this.getContext(),s=e.cwd==="/"?"~":"~"+e.cwd;this.writer.write(`${s} $ `)}onInput(e){return this.inputListeners.add(e),()=>this.inputListeners.delete(e)}registerKeybind(e,s){return this.keybinds.set(e,s),()=>this.keybinds.delete(e)}handleData(e){for(const s of this.inputListeners)s(e);for(let s=0;s<e.length;s++){const n=e[s],r=n.charCodeAt(0);if(this.inEscapeSequence){if(this.escapeBuffer+=n,this.escapeBuffer==="[")continue;this.escapeBuffer.startsWith("[")&&(this.handleEscapeSequence(this.escapeBuffer),this.notifyInputChange()),this.inEscapeSequence=!1,this.escapeBuffer="";continue}if(r===27){this.inEscapeSequence=!0,this.escapeBuffer="";continue}if(r===3){if(this.checkKeybind("ctrl+c"))continue;this.writer.write(`^C\r
`),this.inputBuffer="",this.cursorPos=0,this.onBeforePrompt(),this.printPrompt(),this.notifyInputChange();continue}if(r===4){if(this.checkKeybind("ctrl+d"))continue;continue}if(r===12){if(this.checkKeybind("ctrl+l"))continue;this.getContext().clearHistory(),this.writer.write("\x1B[2J\x1B[H"),this.printPrompt(),this.writer.write(this.inputBuffer);const i=this.inputBuffer.length-this.cursorPos;i>0&&this.writer.write(`\x1B[${i}D`),this.notifyInputChange();continue}if(r===1){if(this.checkKeybind("ctrl+a"))continue;this.cursorPos>0&&(this.writer.write(`\x1B[${this.cursorPos}D`),this.cursorPos=0),this.notifyInputChange();continue}if(r===5){if(this.checkKeybind("ctrl+e"))continue;if(this.cursorPos<this.inputBuffer.length){const i=this.inputBuffer.length-this.cursorPos;this.writer.write(`\x1B[${i}C`),this.cursorPos=this.inputBuffer.length}this.notifyInputChange();continue}if(r===23){if(this.checkKeybind("ctrl+w"))continue;if(this.cursorPos>0){let i=this.cursorPos;for(;i>0&&this.inputBuffer[i-1]===" ";)i--;for(;i>0&&this.inputBuffer[i-1]!==" ";)i--;const o=this.cursorPos-i,c=this.inputBuffer.slice(0,i),l=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=c+l,this.writer.write(`\x1B[${o}D`),this.writer.write(l+" ".repeat(o)),this.writer.write(`\x1B[${l.length+o}D`),this.cursorPos=i}this.notifyInputChange();continue}if(r===11){if(this.checkKeybind("ctrl+k"))continue;this.cursorPos<this.inputBuffer.length&&(this.inputBuffer=this.inputBuffer.slice(0,this.cursorPos),this.writer.write("\x1B[K")),this.notifyInputChange();continue}if(r===21){if(this.checkKeybind("ctrl+u"))continue;if(this.cursorPos>0){this.writer.write(`\x1B[${this.cursorPos}D`),this.writer.write("\x1B[K");const i=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=i,this.cursorPos=0,this.writer.write(i),i.length>0&&this.writer.write(`\x1B[${i.length}D`)}this.notifyInputChange();continue}if(r===127||r===8){if(this.cursorPos>0){const i=this.inputBuffer.slice(0,this.cursorPos-1),o=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=i+o,this.cursorPos--,this.writer.write("\b"),this.writer.write(o+" "),this.writer.write(`\x1B[${o.length+1}D`)}this.notifyInputChange();continue}if(r===13){this.writer.write(`\r
`);const i=this.inputBuffer.trim();this.inputBuffer="",this.cursorPos=0;let o=!1;i&&(o=this.executeCommand(i)==="suppress-prompt"),this.onBeforePrompt(),o||this.printPrompt(),this.notifyInputChange();continue}if(r===9){if(this.checkKeybind("tab"))continue;this.handleTab();continue}if(r>=32){const i=this.inputBuffer.slice(0,this.cursorPos),o=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=i+n+o,this.cursorPos++,this.writer.write(n+o),o.length>0&&this.writer.write(`\x1B[${o.length}D`),this.notifyInputChange()}}}handleTab(){const s=this.inputBuffer.slice(0,this.cursorPos).split(/\s+/);if(s.length<=1){const r=s[0]||"",i=st().filter(o=>o.startsWith(r));this.applyCompletion(r,i,!0)}else{const r=s[s.length-1]||"",i=this.getContext(),o=r.lastIndexOf("/");let c,l;o===-1?(c=i.cwd,l=r):(c=Q(i.cwd,r.slice(0,o+1)),l=r.slice(o+1));const a=qe(c);if(!a)return;const k=a.filter(w=>w.startsWith(l)),B=o===-1?"":r.slice(0,o+1),q=k.map(w=>{const y=L(Q(i.cwd,B+w));return B+w+(y?.kind==="dir"?"/":"")});this.applyCompletion(r,q,!1)}}applyCompletion(e,s,n){if(s.length===0)return;let r;if(s.length===1)r=s[0]+(n?" ":"");else{r=s[0];for(let l=1;l<s.length;l++){let a=0;for(;a<r.length&&a<s[l].length&&r[a]===s[l][a];)a++;r=r.slice(0,a)}if(r===e){this.writer.write(`\r
`+s.join("  ")+`\r
`),this.onBeforePrompt(),this.printPrompt(),this.writer.write(this.inputBuffer);const l=this.inputBuffer.slice(this.cursorPos);l.length>0&&this.writer.write(`\x1B[${l.length}D`),this.notifyInputChange();return}}const i=r.slice(e.length);if(!i)return;const o=this.inputBuffer.slice(0,this.cursorPos),c=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=o+i+c,this.cursorPos+=i.length,this.writer.write(i+c),c.length>0&&this.writer.write(`\x1B[${c.length}D`),this.notifyInputChange()}handleEscapeSequence(e){switch(e){case"[A":break;case"[B":break;case"[C":this.cursorPos<this.inputBuffer.length&&(this.cursorPos++,this.writer.write("\x1B[C"));break;case"[D":this.cursorPos>0&&(this.cursorPos--,this.writer.write("\x1B[D"));break;case"[H":this.cursorPos>0&&(this.writer.write(`\x1B[${this.cursorPos}D`),this.cursorPos=0);break;case"[F":if(this.cursorPos<this.inputBuffer.length){const s=this.inputBuffer.length-this.cursorPos;this.writer.write(`\x1B[${s}C`),this.cursorPos=this.inputBuffer.length}break;case"[3~":if(this.cursorPos<this.inputBuffer.length){const s=this.inputBuffer.slice(0,this.cursorPos),n=this.inputBuffer.slice(this.cursorPos+1);this.inputBuffer=s+n,this.writer.write(n+" "),this.writer.write(`\x1B[${n.length+1}D`)}break}}checkKeybind(e){const s=this.keybinds.get(e);return s?(s(),!0):!1}executeCommand(e){const s=e.split(/\s+/),n=s[0],r=s.slice(1),i=tt(n);if(i){if(i(r,this.writer,this.getContext())==="suppress-prompt")return"suppress-prompt";this.writer.write(`\r
`)}else this.writer.write(`${n}: command not found\r
`)}}function nt(t,e){const s={write(n){t.write(n)},onInput(n){return e.onInput(n)},registerKeybind(n,r){return e.registerKeybind(n,r)},clear(){t.write("\x1B[2J\x1B[H")},get cols(){return 80},get rows(){return 24}};return window.__terminal=s,()=>{delete window.__terminal}}const W="\x1B",z=`${W}[0m`,it=`${W}[1m`,ce=`${W}[2m`,ot=`${W}[32m`,ut=`${W}[36m`,le=`${W}[37m`,ct=[" _  __          _      ","| |/ /__ _  __| | ___ ","| ' // _` |/ _` |/ _ \\","| . \\ (_| | (_| |  __/","|_|\\_\\__,_|\\__,_|\\___|"];function lt(t){t.write(`\r
`);for(const e of ct)t.write(`  ${ut}${e}${z}\r
`);t.write(`\r
`),t.write(`  ${it}${le}kade angell${z}${ce} — software engineer${z}\r
`),t.write(`\r
`),t.write(`  ${ce}${le}type ${z}${ot}help${z}${ce}${le} for available commands${z}\r
`),t.write(`\r
`)}const $e=new Map;function ge(t,e){$e.set(t,e)}function at(t){return $e.get(t)}class we{config;vim=null;canvas=null;input=null;exitCallbacks=[];outputCallbacks=[];vimPathToVfsPath=new Map;constructor(e){this.config=e}async start(){const{VimWasm:e}=await Ce(async()=>{const{VimWasm:r}=await import("./vimwasm-DJXyD7PJ.js");return{VimWasm:r}},[]);this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.style.background="#000000",this.config.container.appendChild(this.canvas),this.input=document.createElement("input"),this.input.style.position="absolute",this.input.style.left="-9999px",this.input.style.top="0",this.input.style.width="1px",this.input.style.height="1px",this.input.style.opacity="0",this.config.container.appendChild(this.input),this.vim=new e({canvas:this.canvas,input:this.input,workerScriptPath:"/vim-wasm/vim.js"}),this.vim.onVimInit=()=>{this.vim.cmdline("set guifont=monospace:h14"),this.vim.cmdline("highlight Normal guibg=#000000 guifg=#cccccc"),this.vim.cmdline("highlight NonText guibg=#000000 guifg=#555555"),this.vim.cmdline("highlight StatusLine guibg=#333333 guifg=#cccccc gui=NONE"),this.vim.cmdline("highlight StatusLineNC guibg=#1a1a1a guifg=#666666 gui=NONE"),this.vim.cmdline("highlight LineNr guibg=#000000 guifg=#555555"),this.vim.cmdline("highlight CursorLine guibg=#111111"),this.vim.cmdline("highlight Visual guibg=#264f78"),this.vim.cmdline("highlight Pmenu guibg=#1a1a1a guifg=#cccccc"),this.vim.cmdline("highlight PmenuSel guibg=#264f78 guifg=#cccccc"),this.vim.cmdline("highlight VertSplit guibg=#000000 guifg=#333333")},this.vim.onVimExit=r=>{this.cleanup();for(const i of this.exitCallbacks)i(0)},this.vim.onError=r=>{console.error("vim.wasm error:",r),this.cleanup();for(const i of this.exitCallbacks)i(1)},this.vim.onFileExport=(r,i)=>{const o=new TextDecoder().decode(new Uint8Array(i)),c=this.vimPathToVfsPath.get(r);if(c)ve(c,o);else{const l=r.split("/").pop();l&&ve(Q(this.config.cwd,l),o)}};const s={},n=[];if(this.config.args.length>0){const r=this.config.args[0],i=this.config.env.__FILE_CONTENT__??"",o=this.config.env.__VFS_PATH__??"",c=`/tmp/${r}`;s[c]=i,n.push(c),o&&this.vimPathToVfsPath.set(c,o)}n.push("-c","autocmd BufWritePost * silent! export"),this.vim.start({files:Object.keys(s).length>0?s:void 0,cmdArgs:n}),this.input.focus()}cleanup(){this.canvas&&(this.canvas.remove(),this.canvas=null),this.input&&(this.input.remove(),this.input=null),this.vim=null}write(e){}resize(e,s){if(this.canvas&&this.vim){const n=this.config.container.getBoundingClientRect();n.width>0&&n.height>0&&this.vim.resize(n.width,n.height)}}terminate(){if(this.vim)try{this.vim.cmdline("qa!")}catch{this.cleanup();for(const e of this.exitCallbacks)e(1)}}onOutput(e){this.outputCallbacks.push(e)}onExit(e){this.exitCallbacks.push(e)}}const Oe="rgb(204,204,204)",Ee="rgb(0,0,0)",be={char:" ",fg:Oe,bg:Ee,bold:!1,italic:!1,underline:!1};ge("vim",t=>new we(t));ge("vi",t=>new we(t));ge("nvim",t=>new we(t));function ht(t){return`rgb(${t.fg_r},${t.fg_g},${t.fg_b})`}function ft(t){return`rgb(${t.bg_r},${t.bg_g},${t.bg_b})`}function Pe(t,e,s){const n=t.getLine(e),r=[];if(n)for(let i=0;i<s;i++){const o=n[i];o?r.push({char:o.codepoint?String.fromCodePoint(o.codepoint):" ",fg:ht(o),bg:ft(o),bold:!!(o.flags&1),italic:!!(o.flags&4),underline:!!(o.flags&8)}):r.push(be)}else for(let i=0;i<s;i++)r.push(be);return r}function dt(t){return t.some(e=>e.char!==" ")}function pt({cwd:t,setCwd:e}){const s=h.useRef(null),n=h.useRef(null),r=h.useRef(null),[i,o]=h.useState([]),[c,l]=h.useState(""),[a,k]=h.useState(0),[B,q]=h.useState(t),[w,y]=h.useState(!0),[P,R]=h.useState({kind:"shell"}),I=h.useRef(null),F=h.useRef(null),A=h.useRef(null),V=h.useRef(P),N=h.useRef(t),_=h.useRef(e);h.useEffect(()=>{N.current=t,q(t)},[t]),h.useEffect(()=>{_.current=e},[e]),h.useEffect(()=>{V.current=P},[P]),h.useEffect(()=>{P.kind==="shell"&&n.current?.focus()},[P]),h.useEffect(()=>{s.current&&P.kind==="shell"&&(s.current.scrollTop=s.current.scrollHeight)},[i,c,P]);const Z=h.useCallback((u,f)=>{const d=at(u);if(!d)return;const S=r.current;if(!S)return;const D={};if(f.length>0){const g=Q(N.current,f[0]);D.__VFS_PATH__=g;const v=_e(g);v!==null&&(D.__FILE_CONTENT__=v)}const T=d({wasmUrl:"",args:f,env:D,cwd:N.current,cols:A.current?.cols||80,rows:A.current?.rows||24,container:S}),O=()=>{S.replaceChildren(),R({kind:"shell"}),setTimeout(()=>{F.current?.printPrompt(),n.current?.focus()},0)};T.onExit(()=>O()),R({kind:"process",process:T,cleanup:O}),T.start().catch(g=>{console.error("Failed to start process:",g),O()})},[]);h.useEffect(()=>{let u=!1,f;const d=document.createElement("div");d.style.position="absolute",d.style.left="-9999px",d.style.top="-9999px",d.style.width="1px",d.style.height="1px",d.style.overflow="hidden",document.body.appendChild(d);async function S(){const{init:T,Terminal:O}=await Ce(async()=>{const{init:C,Terminal:E}=await import("./ghostty-web-C7jND9ev.js");return{init:C,Terminal:E}},__vite__mapDeps([0,1,2]));if(await T(),u)return;const g=new O({fontSize:14});g.open(d),A.current=g,I.current=g.wasmTerm;const v={write(C){g.write(C)}},M=new rt(v);F.current=M;const G=()=>{const C=I.current;if(!C)return;const E=g.cols||80,J=g.rows||24,je=C.getCursor()?.y??0;let re=-1;for(let U=J-1;U>=0;U--){const ee=Pe(C,U,E);if(dt(ee)){re=U;break}}if(re>=0){const U=Math.max(re,je-1),ee=[];for(let Y=0;Y<=U;Y++)ee.push(Pe(C,Y,E));o(Y=>[...Y,...ee])}g.write("\x1B[2J\x1B[H")};return M.setBeforePromptCallback(G),M.setInputChangeCallback((C,E)=>{l(C),k(E)}),M.setContextProvider(()=>({cwd:N.current,setCwd:C=>{N.current=C,q(C),_.current(C)},clearHistory:()=>o([]),runProcess:Z})),f=nt(v,M),lt(v),G(),M.printPrompt(),()=>{g.dispose()}}let D;return S().then(T=>{D=T}),()=>{u=!0,D?.(),f?.(),document.body.removeChild(d)}},[Z]);function p(u){const f=F.current;if(!f||V.current.kind==="process")return;const d=/mac|iphone|ipad|ipod/i.test(navigator.userAgent);if(d?u.metaKey:u.ctrlKey){const D=new Set(["l","t","w","n","r","q","Tab","shift"]);if(u.shiftKey||D.has(u.key))return}u.metaKey&&d||(u.key==="Enter"?(u.preventDefault(),f.handleData("\r")):u.key==="Backspace"?(u.preventDefault(),f.handleData("")):u.key==="Tab"?(u.preventDefault(),f.handleData("	")):u.key==="ArrowUp"?(u.preventDefault(),f.handleData("\x1B[A")):u.key==="ArrowDown"?(u.preventDefault(),f.handleData("\x1B[B")):u.key==="ArrowRight"?(u.preventDefault(),f.handleData("\x1B[C")):u.key==="ArrowLeft"?(u.preventDefault(),f.handleData("\x1B[D")):u.key==="Home"?(u.preventDefault(),f.handleData("\x1B[H")):u.key==="End"?(u.preventDefault(),f.handleData("\x1B[F")):u.key==="Delete"?(u.preventDefault(),f.handleData("\x1B[3~")):u.ctrlKey&&u.key==="c"?(u.preventDefault(),f.handleData("")):u.ctrlKey&&u.key==="d"?(u.preventDefault(),f.handleData("")):u.ctrlKey&&u.key==="l"?(u.preventDefault(),f.handleData("\f")):u.ctrlKey&&u.key==="u"?(u.preventDefault(),f.handleData("")):u.ctrlKey&&u.key==="a"?(u.preventDefault(),f.handleData("")):u.ctrlKey&&u.key==="e"?(u.preventDefault(),f.handleData("")):u.ctrlKey&&u.key==="w"?(u.preventDefault(),f.handleData("")):u.ctrlKey&&u.key==="k"?(u.preventDefault(),f.handleData("\v")):u.key.length===1&&!u.ctrlKey&&!u.metaKey&&(u.preventDefault(),f.handleData(u.key)))}function m(){P.kind==="shell"&&n.current?.focus()}const x=B==="/"?"~ $ ":"~"+B+" $ ";return j.jsxs("div",{ref:s,onClick:m,className:`bg-black text-neutral-300 font-mono text-sm leading-[1.2] px-4 py-3 sm:px-[5vw] sm:py-[4vh] md:px-[8vw] md:py-[6vh] lg:px-[12vw] lg:py-[8vh] h-screen w-screen box-border cursor-text ${P.kind==="shell"?"overflow-auto":"overflow-hidden"}`,children:[P.kind==="shell"&&j.jsxs(j.Fragment,{children:[i.map((u,f)=>j.jsx("div",{className:"whitespace-pre min-h-[1.2em]",children:u.map((d,S)=>j.jsx("span",{className:[d.bold?"font-bold":"",d.italic?"italic":"",d.underline?"underline":""].filter(Boolean).join(" ")||void 0,style:{color:d.fg!==Oe?d.fg:void 0,backgroundColor:d.bg!==Ee?d.bg:void 0},children:d.char},S))},`h${f}`)),j.jsxs("div",{className:"whitespace-pre min-h-[1.2em]",children:[j.jsx("span",{children:x}),j.jsx("span",{children:c.slice(0,a)}),j.jsx("span",{className:w?"animate-blink":void 0,style:{backgroundColor:w?"#d4d4d4":"#555"},children:c[a]??" "}),a<c.length&&j.jsx("span",{children:c.slice(a+1)})]}),j.jsx("textarea",{ref:n,onKeyDown:p,onFocus:()=>y(!0),onBlur:()=>y(!1),className:"absolute -left-[9999px] -top-[9999px] opacity-0 w-0 h-0 p-0 border-none",autoComplete:"off",spellCheck:!1,autoFocus:!0})]}),j.jsx("div",{ref:r,className:P.kind==="process"?"w-full h-full relative":"hidden"})]})}function wt(){const t=Me.c(6);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=We.withDefault("/"),t[0]=e):e=t[0];const[s,n]=Ye("cwd",e);let r;t[1]!==s?(r=De(s)?s:"/",t[1]=s,t[2]=r):r=t[2];const i=r;let o;return t[3]!==n||t[4]!==i?(o=j.jsx(pt,{cwd:i,setCwd:n}),t[3]=n,t[4]=i,t[5]=o):o=t[5],o}export{wt as component};
