const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ghostty-web-DiFcHhCM.js","assets/main-BfhvLiy4.js","assets/main-Cxb9ilR2.css"])))=>i.map(i=>d[i]);
import{d as b,e as Pt,r as f,u as Mt,a as Rt,b as Tt,w as At,_ as kt,j as O,c as Kt}from"./main-BfhvLiy4.js";function Nt(){if(typeof window>"u"||!window.GestureEvent)return 50;try{const e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}function Lt(e){return{method:"throttle",timeMs:e}}const Y=Lt(Nt());function Ft(e){return e===null||Array.isArray(e)&&e.length===0}function Ht(e,t,s){if(typeof e=="string")s.set(t,e);else{s.delete(t);for(const i of e)s.append(t,i);s.has(t)||s.set(t,"")}return s}function St(){const e=new Map;return{on(t,s){const i=e.get(t)||[];return i.push(s),e.set(t,i),()=>this.off(t,s)},off(t,s){const i=e.get(t);i&&e.set(t,i.filter(r=>r!==s))},emit(t,s){e.get(t)?.forEach(i=>i(s))}}}function at(e,t,s){function i(){e(),s.removeEventListener("abort",n)}const r=setTimeout(i,t);function n(){clearTimeout(r),s.removeEventListener("abort",n)}s.addEventListener("abort",n)}function ht(){const e=Promise;if(Promise.hasOwnProperty("withResolvers"))return Promise.withResolvers();let t=()=>{},s=()=>{};return{promise:new e((i,r)=>{t=i,s=r}),resolve:t,reject:s}}function Qt(e,t){let s=t;for(let i=e.length-1;i>=0;i--){const r=e[i];if(!r)continue;const n=s;s=()=>r(n)}s()}function ft(){return new URLSearchParams(location.search)}var Bt=class{updateMap=new Map;options={history:"replace",scroll:!1,shallow:!0};timeMs=Y.timeMs;transitions=new Set;resolvers=null;controller=null;lastFlushedAt=0;resetQueueOnNextPush=!1;push({key:e,query:t,options:s},i=Y.timeMs){this.resetQueueOnNextPush&&(this.reset(),this.resetQueueOnNextPush=!1),b("[nuqs gtq] Enqueueing %s=%s %O",e,t,s),this.updateMap.set(e,t),s.history==="push"&&(this.options.history="push"),s.scroll&&(this.options.scroll=!0),s.shallow===!1&&(this.options.shallow=!1),s.startTransition&&this.transitions.add(s.startTransition),(!Number.isFinite(this.timeMs)||i>this.timeMs)&&(this.timeMs=i)}getQueuedQuery(e){return this.updateMap.get(e)}getPendingPromise({getSearchParamsSnapshot:e=ft}){return this.resolvers?.promise??Promise.resolve(e())}flush({getSearchParamsSnapshot:e=ft,rateLimitFactor:t=1,...s},i){if(this.controller??=new AbortController,!Number.isFinite(this.timeMs))return b("[nuqs gtq] Skipping flush due to throttleMs=Infinity"),Promise.resolve(e());if(this.resolvers)return this.resolvers.promise;this.resolvers=ht();const r=()=>{this.lastFlushedAt=performance.now();const[o,c]=this.applyPendingUpdates({...s,autoResetQueueOnUpdate:s.autoResetQueueOnUpdate??!0,getSearchParamsSnapshot:e},i);c===null?(this.resolvers.resolve(o),this.resetQueueOnNextPush=!0):this.resolvers.reject(o),this.resolvers=null};return at(()=>{const o=performance.now()-this.lastFlushedAt,c=this.timeMs,l=t*Math.max(0,c-o);b("[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)",l,c,t),l===0?r():at(r,l,this.controller.signal)},0,this.controller.signal),this.resolvers.promise}abort(){return this.controller?.abort(),this.controller=new AbortController,this.resolvers?.resolve(new URLSearchParams),this.resolvers=null,this.reset()}reset(){const e=Array.from(this.updateMap.keys());return b("[nuqs gtq] Resetting queue %s",JSON.stringify(Object.fromEntries(this.updateMap))),this.updateMap.clear(),this.transitions.clear(),this.options={history:"replace",scroll:!1,shallow:!0},this.timeMs=Y.timeMs,e}applyPendingUpdates(e,t){const{updateUrl:s,getSearchParamsSnapshot:i}=e;let r=i();if(b("[nuqs gtq] Applying %d pending update(s) on top of %s",this.updateMap.size,r.toString()),this.updateMap.size===0)return[r,null];const n=Array.from(this.updateMap.entries()),o={...this.options},c=Array.from(this.transitions);e.autoResetQueueOnUpdate&&this.reset(),b("[nuqs gtq] Flushing queue %O with options %O",n,o);for(const[l,h]of n)h===null?r.delete(l):r=Ht(h,l,r);t&&(r=t(r));try{return Qt(c,()=>{s(r,o)}),[r,null]}catch(l){return console.error(Pt(429),n.map(([h])=>h).join(),l),[r,l]}}};const et=new Bt;function Vt(e,t,s){const i=f.useCallback(()=>{const n=Object.fromEntries(e.map(o=>[o,s(o)]));return[JSON.stringify(n),n]},[e.join(","),s]),r=f.useRef(null);return r.current===null&&(r.current=i()),f.useSyncExternalStore(f.useCallback(n=>{const o=e.map(c=>t(c,n));return()=>o.forEach(c=>c())},[e.join(","),t]),()=>{const[n,o]=i();return r.current[0]===n?r.current[1]:(r.current=[n,o],o)},()=>r.current[1])}var Ut=class{callback;resolvers=ht();controller=new AbortController;queuedValue=void 0;constructor(e){this.callback=e}abort(){this.controller.abort(),this.queuedValue=void 0}push(e,t){return this.queuedValue=e,this.controller.abort(),this.controller=new AbortController,at(()=>{const s=this.resolvers;try{b("[nuqs dq] Flushing debounce queue",e);const i=this.callback(e);b("[nuqs dq] Reset debounce queue %O",this.queuedValue),this.queuedValue=void 0,this.resolvers=ht(),i.then(r=>s.resolve(r)).catch(r=>s.reject(r))}catch(i){this.queuedValue=void 0,s.reject(i)}},t,this.controller.signal),this.resolvers.promise}},zt=class{throttleQueue;queues=new Map;queuedQuerySync=St();constructor(e=new Bt){this.throttleQueue=e}useQueuedQueries(e){return Vt(e,(t,s)=>this.queuedQuerySync.on(t,s),t=>this.getQueuedQuery(t))}push(e,t,s,i){if(!Number.isFinite(t)){const o=s.getSearchParamsSnapshot??ft;return Promise.resolve(o())}const r=e.key;if(!this.queues.has(r)){b("[nuqs dqc] Creating debounce queue for `%s`",r);const o=new Ut(c=>(this.throttleQueue.push(c),this.throttleQueue.flush(s,i).finally(()=>{this.queues.get(c.key)?.queuedValue===void 0&&(b("[nuqs dqc] Cleaning up empty queue for `%s`",c.key),this.queues.delete(c.key)),this.queuedQuerySync.emit(c.key)})));this.queues.set(r,o)}b("[nuqs dqc] Enqueueing debounce update %O",e);const n=this.queues.get(r).push(e,t);return this.queuedQuerySync.emit(r),n}abort(e){const t=this.queues.get(e);return t?(b("[nuqs dqc] Aborting debounce queue %s=%s",e,t.queuedValue?.query),this.queues.delete(e),t.abort(),this.queuedQuerySync.emit(e),s=>(s.then(t.resolvers.resolve,t.resolvers.reject),s)):s=>s}abortAll(){for(const[e,t]of this.queues.entries())b("[nuqs dqc] Aborting debounce queue %s=%s",e,t.queuedValue?.query),t.abort(),t.resolvers.resolve(new URLSearchParams),this.queuedQuerySync.emit(e);this.queues.clear()}getQueuedQuery(e){const t=this.queues.get(e)?.queuedValue?.query;return t!==void 0?t:this.throttleQueue.getQueuedQuery(e)}};const it=new zt(et);function Wt(e,t){return e===t?!0:e===null||t===null||typeof e=="string"||typeof t=="string"||e.length!==t.length?!1:e.every((s,i)=>s===t[i])}function Ct(e,t,s){try{return e(t)}catch(i){return At("[nuqs] Error while parsing value `%s`: %O"+(s?" (for key `%s`)":""),t,i,s),null}}function N(e){function t(s){if(typeof s>"u")return null;let i="";if(Array.isArray(s)){if(s[0]===void 0)return null;i=s[0]}return typeof s=="string"&&(i=s),Ct(e.parse,i)}return{type:"single",eq:(s,i)=>s===i,...e,parseServerSide:t,withDefault(s){return{...this,defaultValue:s,parseServerSide(i){return t(i)??s}}},withOptions(s){return{...this,...s}}}}const Jt=N({parse:e=>e,serialize:String});N({parse:e=>{const t=parseInt(e);return t==t?t:null},serialize:e=>""+Math.round(e)});N({parse:e=>{const t=parseInt(e);return t==t?t-1:null},serialize:e=>""+Math.round(e+1)});N({parse:e=>{const t=parseInt(e,16);return t==t?t:null},serialize:e=>{const t=Math.round(e).toString(16);return(t.length&1?"0":"")+t}});N({parse:e=>{const t=parseFloat(e);return t==t?t:null},serialize:String});N({parse:e=>e.toLowerCase()==="true",serialize:String});function pt(e,t){return e.valueOf()===t.valueOf()}N({parse:e=>{const t=parseInt(e);return t==t?new Date(t):null},serialize:e=>""+e.valueOf(),eq:pt});N({parse:e=>{const t=new Date(e);return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString(),eq:pt});N({parse:e=>{const t=new Date(e.slice(0,10));return t.valueOf()==t.valueOf()?t:null},serialize:e=>e.toISOString().slice(0,10),eq:pt});const nt=St(),Gt={};function Yt(e,t={}){const s=f.useId(),i=Mt(),r=Rt(),{history:n="replace",scroll:o=i?.scroll??!1,shallow:c=i?.shallow??!0,throttleMs:l=Y.timeMs,limitUrlUpdates:h=i?.limitUrlUpdates,clearOnDefault:P=i?.clearOnDefault??!0,startTransition:k,urlKeys:I=Gt}=t,g=Object.keys(e).join(","),v=f.useMemo(()=>Object.fromEntries(Object.keys(e).map(p=>[p,I[p]??p])),[g,JSON.stringify(I)]),x=Tt(Object.values(v)),E=x.searchParams,M=f.useRef({}),L=f.useMemo(()=>Object.fromEntries(Object.keys(e).map(p=>[p,e[p].defaultValue??null])),[Object.values(e).map(({defaultValue:p})=>p).join(",")]),R=it.useQueuedQueries(Object.values(v)),[H,K]=f.useState(()=>ot(e,I,E??new URLSearchParams,R).state),D=f.useRef(H);if(b("[nuq+ %s `%s`] render - state: %O, iSP: %s",s,g,H,E),Object.keys(M.current).join("&")!==Object.values(v).join("&")){const{state:p,hasChanged:m}=ot(e,I,E,R,M.current,D.current);m&&(b("[nuq+ %s `%s`] State changed: %O",s,g,{state:p,initialSearchParams:E,queuedQueries:R,queryRef:M.current,stateRef:D.current}),D.current=p,K(p)),M.current=Object.fromEntries(Object.entries(v).map(([u,a])=>[a,e[u]?.type==="multi"?E?.getAll(a):E?.get(a)??null]))}f.useEffect(()=>{const{state:p,hasChanged:m}=ot(e,I,E,R,M.current,D.current);m&&(b("[nuq+ %s `%s`] State changed: %O",s,g,{state:p,initialSearchParams:E,queuedQueries:R,queryRef:M.current,stateRef:D.current}),D.current=p,K(p))},[Object.values(v).map(p=>`${p}=${E?.getAll(p)}`).join("&"),JSON.stringify(R)]),f.useEffect(()=>{const p=Object.keys(e).reduce((m,u)=>(m[u]=({state:a,query:d})=>{K(_=>{const{defaultValue:S}=e[u],$=v[u],T=a??S??null,y=_[u]??S??null;return Object.is(y,T)?(b("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). no change, skipping, resolved: %O",s,g,$,a,S,D.current),_):(D.current={...D.current,[u]:T},M.current[$]=d,b("[nuq+ %s `%s`] Cross-hook key sync %s: %O (default: %O). updateInternalState, resolved: %O",s,g,$,a,S,D.current),D.current)})},m),{});for(const m of Object.keys(e)){const u=v[m];b("[nuq+ %s `%s`] Subscribing to sync for `%s`",s,u,g),nt.on(u,p[m])}return()=>{for(const m of Object.keys(e)){const u=v[m];b("[nuq+ %s `%s`] Unsubscribing to sync for `%s`",s,u,g),nt.off(u,p[m])}}},[g,v]);const X=f.useCallback((p,m={})=>{const u=Object.fromEntries(Object.keys(e).map(y=>[y,null])),a=typeof p=="function"?p(wt(D.current,L))??u:p??u;b("[nuq+ %s `%s`] setState: %O",s,g,a);let d,_=0,S=!1;const $=[];for(let[y,B]of Object.entries(a)){const w=e[y],V=v[y];if(!w||B===void 0)continue;(m.clearOnDefault??w.clearOnDefault??P)&&B!==null&&w.defaultValue!==void 0&&(w.eq??((j,Z)=>j===Z))(B,w.defaultValue)&&(B=null);const C=B===null?null:(w.serialize??String)(B);nt.emit(V,{state:B,query:C});const A={key:V,query:C,options:{history:m.history??w.history??n,shallow:m.shallow??w.shallow??c,scroll:m.scroll??w.scroll??o,startTransition:m.startTransition??w.startTransition??k}};if(m?.limitUrlUpdates?.method==="debounce"||h?.method==="debounce"||w.limitUrlUpdates?.method==="debounce"){A.options.shallow===!0&&console.warn(Pt(422));const j=m?.limitUrlUpdates?.timeMs??h?.timeMs??w.limitUrlUpdates?.timeMs??Y.timeMs,Z=it.push(A,j,x,r);_<j&&(d=Z,_=j)}else{const j=m?.limitUrlUpdates?.timeMs??w?.limitUrlUpdates?.timeMs??h?.timeMs??m.throttleMs??w.throttleMs??l;$.push(it.abort(V)),et.push(A,j),S=!0}}const T=$.reduce((y,B)=>B(y),S?et.flush(x,r):et.getPendingPromise(x));return d??T},[g,n,c,o,l,h?.method,h?.timeMs,k,v,x.updateUrl,x.getSearchParamsSnapshot,x.rateLimitFactor,r,L]);return[f.useMemo(()=>wt(H,L),[H,L]),X]}function ot(e,t,s,i,r,n){let o=!1;const c=Object.entries(e).reduce((l,[h,P])=>{const k=t?.[h]??h,I=i[k],g=P.type==="multi"?[]:null,v=I===void 0?(P.type==="multi"?s?.getAll(k):s?.get(k))??g:I;return r&&n&&Wt(r[k]??g,v)?(l[h]=n[h]??null,l):(o=!0,l[h]=(Ft(v)?null:Ct(P.parse,v,k))??null,r&&(r[k]=v),l)},{});if(!o){const l=Object.keys(e),h=Object.keys(n??{});o=l.length!==h.length||l.some(P=>!h.includes(P))}return{state:c,hasChanged:o}}function wt(e,t){return Object.fromEntries(Object.keys(e).map(s=>[s,e[s]??t[s]??null]))}function Xt(e,t={}){const{parse:s,type:i,serialize:r,eq:n,defaultValue:o,...c}=t,[{[e]:l},h]=Yt({[e]:{parse:s??(P=>P),type:i,serialize:r,eq:n,defaultValue:o}},c);return[l,f.useCallback((P,k={})=>h(I=>({[e]:typeof P=="function"?P(I[e]):P}),k),[e,h])]}function z(e,t){return{kind:"file",name:e,content:t}}function ut(e,t){const s={};for(const i of t)s[i.name]=i;return{kind:"dir",name:e,children:s}}const st=ut("/",[z("about.txt",`Hello! I'm Kade Angell.
Welcome to my portfolio.
`),z("resume.txt",`Resume placeholder — content coming soon.
`),ut("projects",[z("portfolio.txt",`portfolio — this terminal-based portfolio site.
Built with React, TypeScript, and ghostty-web.
`),z("zaymo.txt",`zaymo — placeholder project description.
`)]),ut("links",[z("github.txt",`https://github.com/kadeangell
`),z("linkedin.txt",`https://linkedin.com/in/kadeangell
`)])]),dt="vfs:";function F(e,t){if(t==="~"||t==="")return"/";const s=t.startsWith("/")?t.split("/"):[...e.split("/"),...t.split("/")],i=[];for(const r of s)r===""||r==="."||(r===".."?i.pop():i.push(r));return"/"+i.join("/")}function Q(e){if(e==="/")return st;const t=e.split("/").filter(Boolean);let s=st;for(const i of t){if(s.kind!=="dir")return;const r=s.children[i];if(!r)return;s=r}return s}function qt(e){const t=Q(e);return!t||t.kind!=="dir"?null:Object.keys(t.children)}function Dt(e){const t=Q(e);return!t||t.kind!=="file"?null:t.content}function It(e){const t=Q(e);return t!==void 0&&t.kind==="dir"}function vt(e,t){const s=e.split("/").filter(Boolean),i=s.pop();if(!i)return!1;let r=st;for(const o of s){if(r.kind!=="dir")return!1;let c=r.children[o];if(!c){const l={kind:"dir",name:o,children:{}};r.children[o]=l,c=l}if(c.kind!=="dir")return!1;r=c}if(r.kind!=="dir")return!1;const n=r.children[i];if(n&&n.kind==="dir")return!1;r.children[i]={kind:"file",name:i,content:t};try{localStorage.setItem(dt+e,t)}catch{}return!0}function Zt(e,t){const s=e.split("/").filter(Boolean),i=s.pop();if(!i)return;let r=st;for(const n of s){if(r.kind!=="dir")return;let o=r.children[n];if(!o){const c={kind:"dir",name:n,children:{}};r.children[n]=c,o=c}if(o.kind!=="dir")return;r=o}r.kind==="dir"&&(r.children[i]={kind:"file",name:i,content:t})}function te(){try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(!t?.startsWith(dt))continue;const s=t.slice(dt.length),i=localStorage.getItem(t);i!==null&&Zt(s,i)}}catch{}}te();const q=new Map;q.set("help",(e,t)=>{t.write(`\r
Available commands:\r
`),t.write(`  help     Show this message\r
`),t.write(`  clear    Clear the screen\r
`),t.write(`  echo     Print arguments\r
`),t.write(`  whoami   Display current user\r
`),t.write(`  date     Display current date\r
`),t.write(`  pwd      Print working directory\r
`),t.write(`  ls       List directory contents\r
`),t.write(`  cd       Change directory\r
`),t.write(`  cat      Print file contents\r
`),t.write(`  history  Show command history\r
`),t.write(`  vim      Open file in Vim editor\r
`),t.write(`  rainbow  Test color output\r
`)});q.set("history",(e,t,s)=>{const i=s.getCommandHistory();if(i.length===0){t.write(`\r
(no history)`);return}for(let r=0;r<i.length;r++)t.write(`\r
  ${String(r+1).padStart(4)}  ${i[r]}`)});q.set("clear",(e,t,s)=>{s.clearHistory(),t.write("\x1B[2J\x1B[H")});q.set("echo",(e,t)=>{t.write(`\r
`+e.join(" "))});q.set("whoami",(e,t)=>{t.write(`\r
guest`)});q.set("date",(e,t)=>{t.write(`\r
`+new Date().toString())});q.set("pwd",(e,t,s)=>{t.write(`\r
`+s.cwd)});q.set("ls",(e,t,s)=>{const i=e[0]?F(s.cwd,e[0]):s.cwd,r=qt(i);if(!r){t.write(`\r
ls: ${e[0]||i}: No such directory`);return}const n=Q(i);if(!n||n.kind!=="dir")return;const o=[];for(const c of r)n.children[c].kind==="dir"?o.push(`\x1B[1;34m${c}/\x1B[0m`):o.push(c);t.write(`\r
`+o.join("  "))});q.set("cd",(e,t,s)=>{const i=e[0];if(!i||i==="~"){s.setCwd("/");return}const r=F(s.cwd,i);if(!It(r)){t.write(`\r
cd: ${i}: No such directory`);return}s.setCwd(r)});q.set("cat",(e,t,s)=>{if(!e[0]){t.write(`\r
cat: missing file operand`);return}const i=F(s.cwd,e[0]),r=Q(i);if(!r){t.write(`\r
cat: ${e[0]}: No such file or directory`);return}if(r.kind==="dir"){t.write(`\r
cat: ${e[0]}: Is a directory`);return}const n=Dt(i);n!==null&&t.write(`\r
`+n.replace(/\n/g,`\r
`))});q.set("rainbow",(e,t)=>{const i="\x1B[0m",r=[{code:"31",name:"red"},{code:"33",name:"yellow"},{code:"32",name:"green"},{code:"36",name:"cyan"},{code:"34",name:"blue"},{code:"35",name:"magenta"}];t.write(`\r
`);for(const n of r)t.write(`\x1B[${n.code}m${"█".repeat(8)}${i}`);t.write(`\r
`);for(const n of r)t.write(`\x1B[${n.code}m${n.name.padEnd(8)}${i}`);t.write(`\r
`);for(const n of r)t.write(`\x1B[${n.code};1m${"█".repeat(8)}${i}`);t.write(`\r
`),t.write(`\r
  256-color gradient:\r
  `);for(let n=196;n<=201;n++)t.write(`\x1B[38;5;${n}m██${i}`);for(let n=207;n>=202;n--)t.write(`\x1B[38;5;${n}m██${i}`);t.write(`\r
  `),t.write(`\r
  RGB true color:\r
  `);for(let n=0;n<48;n++){const o=n/48*360,[c,l,h]=ee(o,100,50);t.write(`\x1B[38;2;${c};${l};${h}m█${i}`)}t.write(`\r
`)});function ee(e,t,s){t/=100,s/=100;const i=o=>(o+e/30)%12,r=t*Math.min(s,1-s),n=o=>s-r*Math.max(-1,Math.min(i(o)-3,Math.min(9-i(o),1)));return[Math.round(n(0)*255),Math.round(n(8)*255),Math.round(n(4)*255)]}const mt=(e,t,s)=>{const i=e[0];if(i){const r=F(s.cwd,i);if(Q(r)?.kind==="dir"){t.write(`\r
vim: ${i}: Is a directory`);return}}return s.runProcess("vim",e),"suppress-prompt"};q.set("vim",mt);q.set("vi",mt);q.set("nvim",mt);function se(e){return q.get(e)}function re(){return[...q.keys()]}const _t="shell-history",ie=500;function ne(){try{const e=localStorage.getItem(_t);if(e)return JSON.parse(e)}catch{}return[]}function oe(e){try{localStorage.setItem(_t,JSON.stringify(e.slice(-ie)))}catch{}}class ue{inputBuffer="";cursorPos=0;writer;inputListeners=new Set;keybinds=new Map;escapeBuffer="";inEscapeSequence=!1;getContext=()=>({cwd:"/",setCwd:()=>{},clearHistory:()=>{},runProcess:()=>{},getCommandHistory:()=>[]});onBeforePrompt=()=>{};onInputChange=()=>{};history=ne();historyIndex=-1;savedInput="";mode={kind:"normal"};constructor(t){this.writer=t}setContextProvider(t){this.getContext=t}setBeforePromptCallback(t){this.onBeforePrompt=t}setInputChangeCallback(t){this.onInputChange=t}notifyInputChange(){const t=this.mode.kind==="search"?`(reverse-i-search)'${this.mode.query}': `:this.buildPrompt();this.onInputChange(this.inputBuffer,this.cursorPos,t)}buildPrompt(){const t=this.getContext();return`${t.cwd==="/"?"~":"~"+t.cwd} $ `}printPrompt(){this.writer.write(this.buildPrompt())}getHistory(){return this.history}onInput(t){return this.inputListeners.add(t),()=>this.inputListeners.delete(t)}registerKeybind(t,s){return this.keybinds.set(t,s),()=>this.keybinds.delete(t)}pushHistory(t){this.history.length>0&&this.history[this.history.length-1]===t||(this.history.push(t),oe(this.history))}resetHistoryBrowsing(){this.historyIndex=-1,this.savedInput=""}replaceInputLine(t){this.cursorPos>0&&this.writer.write(`\x1B[${this.cursorPos}D`),this.writer.write("\x1B[K"),this.writer.write(t),this.inputBuffer=t,this.cursorPos=t.length}searchMatch(){if(this.mode.kind!=="search")return null;const{query:t,matchIndex:s}=this.mode;if(!t)return null;let i=0;for(let r=this.history.length-1;r>=0;r--)if(this.history[r].includes(t)){if(i===s)return this.history[r];i++}return null}redrawSearchPrompt(){if(this.mode.kind!=="search")return;const t=this.searchMatch()??"";this.writer.write("\r\x1B[K"),this.writer.write(`(reverse-i-search)'${this.mode.query}': ${t}`),this.inputBuffer=t,this.cursorPos=t.length}enterSearchMode(){this.savedInput=this.inputBuffer,this.mode={kind:"search",query:"",matchIndex:0},this.redrawSearchPrompt(),this.notifyInputChange()}exitSearchMode(t){const s=t?this.searchMatch():null;this.mode={kind:"normal"};const i=this.buildPrompt(),r=t&&s!==null?s:this.savedInput;this.inputBuffer=r,this.cursorPos=r.length,this.savedInput="",this.writer.write("\r\x1B[K"+i+r),this.notifyInputChange()}handleData(t){for(const s of this.inputListeners)s(t);for(let s=0;s<t.length;s++){const i=t[s],r=i.charCodeAt(0);if(this.inEscapeSequence){if(this.escapeBuffer+=i,this.escapeBuffer==="[")continue;if(this.escapeBuffer.startsWith("[")){if(this.mode.kind==="search"){this.exitSearchMode(!1),this.inEscapeSequence=!1,this.escapeBuffer="";continue}this.handleEscapeSequence(this.escapeBuffer),this.notifyInputChange()}this.inEscapeSequence=!1,this.escapeBuffer="";continue}if(r===27){if(this.mode.kind==="search"){this.exitSearchMode(!1);continue}this.inEscapeSequence=!0,this.escapeBuffer="";continue}if(this.mode.kind==="search"){if(r===18){this.mode={...this.mode,matchIndex:this.mode.matchIndex+1},this.redrawSearchPrompt(),this.notifyInputChange();continue}if(r===7){this.exitSearchMode(!1);continue}if(r===3){this.exitSearchMode(!1);continue}if(r===13){const n=this.searchMatch();if(this.exitSearchMode(!0),n){this.writer.write(`\r
`),this.pushHistory(n),this.inputBuffer="",this.cursorPos=0;let o=!1;o=this.executeCommand(n)==="suppress-prompt",this.onBeforePrompt(),o||this.printPrompt(),this.notifyInputChange()}continue}if(r===127||r===8){this.mode.query.length>0&&(this.mode={...this.mode,query:this.mode.query.slice(0,-1),matchIndex:0},this.redrawSearchPrompt(),this.notifyInputChange());continue}if(r>=32){this.mode={...this.mode,query:this.mode.query+i,matchIndex:0},this.redrawSearchPrompt(),this.notifyInputChange();continue}this.exitSearchMode(!0)}if(r===18){this.enterSearchMode();continue}if(r===3){if(this.checkKeybind("ctrl+c"))continue;this.resetHistoryBrowsing(),this.writer.write(`^C\r
`),this.inputBuffer="",this.cursorPos=0,this.onBeforePrompt(),this.printPrompt(),this.notifyInputChange();continue}if(r===4){if(this.checkKeybind("ctrl+d"))continue;continue}if(r===12){if(this.checkKeybind("ctrl+l"))continue;this.getContext().clearHistory(),this.writer.write("\x1B[2J\x1B[H"),this.printPrompt(),this.writer.write(this.inputBuffer);const n=this.inputBuffer.length-this.cursorPos;n>0&&this.writer.write(`\x1B[${n}D`),this.notifyInputChange();continue}if(r===1){if(this.checkKeybind("ctrl+a"))continue;this.cursorPos>0&&(this.writer.write(`\x1B[${this.cursorPos}D`),this.cursorPos=0),this.notifyInputChange();continue}if(r===5){if(this.checkKeybind("ctrl+e"))continue;if(this.cursorPos<this.inputBuffer.length){const n=this.inputBuffer.length-this.cursorPos;this.writer.write(`\x1B[${n}C`),this.cursorPos=this.inputBuffer.length}this.notifyInputChange();continue}if(r===23){if(this.checkKeybind("ctrl+w"))continue;if(this.cursorPos>0){let n=this.cursorPos;for(;n>0&&this.inputBuffer[n-1]===" ";)n--;for(;n>0&&this.inputBuffer[n-1]!==" ";)n--;const o=this.cursorPos-n,c=this.inputBuffer.slice(0,n),l=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=c+l,this.writer.write(`\x1B[${o}D`),this.writer.write(l+" ".repeat(o)),this.writer.write(`\x1B[${l.length+o}D`),this.cursorPos=n}this.notifyInputChange();continue}if(r===11){if(this.checkKeybind("ctrl+k"))continue;this.cursorPos<this.inputBuffer.length&&(this.inputBuffer=this.inputBuffer.slice(0,this.cursorPos),this.writer.write("\x1B[K")),this.notifyInputChange();continue}if(r===21){if(this.checkKeybind("ctrl+u"))continue;if(this.cursorPos>0){this.writer.write(`\x1B[${this.cursorPos}D`),this.writer.write("\x1B[K");const n=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=n,this.cursorPos=0,this.writer.write(n),n.length>0&&this.writer.write(`\x1B[${n.length}D`)}this.notifyInputChange();continue}if(r===127||r===8){if(this.cursorPos>0){const n=this.inputBuffer.slice(0,this.cursorPos-1),o=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=n+o,this.cursorPos--,this.writer.write("\b"),this.writer.write(o+" "),this.writer.write(`\x1B[${o.length+1}D`)}this.notifyInputChange();continue}if(r===13){this.writer.write(`\r
`);const n=this.inputBuffer.trim();this.inputBuffer="",this.cursorPos=0,this.resetHistoryBrowsing();let o=!1;n&&(this.pushHistory(n),o=this.executeCommand(n)==="suppress-prompt"),this.onBeforePrompt(),o||this.printPrompt(),this.notifyInputChange();continue}if(r===9){if(this.checkKeybind("tab"))continue;this.handleTab();continue}if(r>=32){this.resetHistoryBrowsing();const n=this.inputBuffer.slice(0,this.cursorPos),o=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=n+i+o,this.cursorPos++,this.writer.write(i+o),o.length>0&&this.writer.write(`\x1B[${o.length}D`),this.notifyInputChange()}}}handleTab(){const s=this.inputBuffer.slice(0,this.cursorPos).split(/\s+/);if(s.length<=1){const r=s[0]||"",n=re().filter(o=>o.startsWith(r));this.applyCompletion(r,n,!0)}else{const r=s[s.length-1]||"",n=this.getContext(),o=r.lastIndexOf("/");let c,l;o===-1?(c=n.cwd,l=r):(c=F(n.cwd,r.slice(0,o+1)),l=r.slice(o+1));const h=qt(c);if(!h)return;const P=h.filter(g=>g.startsWith(l)),k=o===-1?"":r.slice(0,o+1),I=P.map(g=>{const v=Q(F(n.cwd,k+g));return k+g+(v?.kind==="dir"?"/":"")});this.applyCompletion(r,I,!1)}}applyCompletion(t,s,i){if(s.length===0)return;let r;if(s.length===1)r=s[0]+(i?" ":"");else{r=s[0];for(let l=1;l<s.length;l++){let h=0;for(;h<r.length&&h<s[l].length&&r[h]===s[l][h];)h++;r=r.slice(0,h)}if(r===t){this.writer.write(`\r
`+s.join("  ")+`\r
`),this.onBeforePrompt(),this.printPrompt(),this.writer.write(this.inputBuffer);const l=this.inputBuffer.slice(this.cursorPos);l.length>0&&this.writer.write(`\x1B[${l.length}D`),this.notifyInputChange();return}}const n=r.slice(t.length);if(!n)return;const o=this.inputBuffer.slice(0,this.cursorPos),c=this.inputBuffer.slice(this.cursorPos);this.inputBuffer=o+n+c,this.cursorPos+=n.length,this.writer.write(n+c),c.length>0&&this.writer.write(`\x1B[${c.length}D`),this.notifyInputChange()}handleEscapeSequence(t){switch(t){case"[A":{if(this.history.length===0)break;if(this.historyIndex===-1)this.savedInput=this.inputBuffer,this.historyIndex=this.history.length-1;else if(this.historyIndex>0)this.historyIndex--;else break;this.replaceInputLine(this.history[this.historyIndex]);break}case"[B":{if(this.historyIndex===-1)break;this.historyIndex<this.history.length-1?(this.historyIndex++,this.replaceInputLine(this.history[this.historyIndex])):(this.historyIndex=-1,this.replaceInputLine(this.savedInput),this.savedInput="");break}case"[C":this.cursorPos<this.inputBuffer.length&&(this.cursorPos++,this.writer.write("\x1B[C"));break;case"[D":this.cursorPos>0&&(this.cursorPos--,this.writer.write("\x1B[D"));break;case"[H":this.cursorPos>0&&(this.writer.write(`\x1B[${this.cursorPos}D`),this.cursorPos=0);break;case"[F":if(this.cursorPos<this.inputBuffer.length){const s=this.inputBuffer.length-this.cursorPos;this.writer.write(`\x1B[${s}C`),this.cursorPos=this.inputBuffer.length}break;case"[3~":if(this.cursorPos<this.inputBuffer.length){const s=this.inputBuffer.slice(0,this.cursorPos),i=this.inputBuffer.slice(this.cursorPos+1);this.inputBuffer=s+i,this.writer.write(i+" "),this.writer.write(`\x1B[${i.length+1}D`)}break}}checkKeybind(t){const s=this.keybinds.get(t);return s?(s(),!0):!1}executeCommand(t){const s=t.split(/\s+/),i=s[0],r=s.slice(1),n=se(i);if(n){if(n(r,this.writer,this.getContext())==="suppress-prompt")return"suppress-prompt";this.writer.write(`\r
`)}else this.writer.write(`${i}: command not found\r
`)}}function ce(e,t){const s={write(i){e.write(i)},onInput(i){return t.onInput(i)},registerKeybind(i,r){return t.registerKeybind(i,r)},clear(){e.write("\x1B[2J\x1B[H")},get cols(){return 80},get rows(){return 24}};return window.__terminal=s,()=>{delete window.__terminal}}const J="\x1B",W=`${J}[0m`,le=`${J}[1m`,ct=`${J}[2m`,ae=`${J}[32m`,he=`${J}[36m`,lt=`${J}[37m`,fe=[" _  __          _      ","| |/ /__ _  __| | ___ ","| ' // _` |/ _` |/ _ \\","| . \\ (_| | (_| |  __/","|_|\\_\\__,_|\\__,_|\\___|"];function de(e){e.write(`\r
`);for(const t of fe)e.write(`  ${he}${t}${W}\r
`);e.write(`\r
`),e.write(`  ${le}${lt}kade angell${W}${ct} — software engineer${W}\r
`),e.write(`\r
`),e.write(`  ${ct}${lt}type ${W}${ae}help${W}${ct}${lt} for available commands${W}\r
`),e.write(`\r
`)}const $t=new Map;function gt(e,t){$t.set(e,t)}function pe(e){return $t.get(e)}class yt{config;vim=null;canvas=null;input=null;exitCallbacks=[];outputCallbacks=[];vimPathToVfsPath=new Map;constructor(t){this.config=t}async start(){const{VimWasm:t}=await kt(async()=>{const{VimWasm:r}=await import("./vimwasm-DJXyD7PJ.js");return{VimWasm:r}},[]);this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.style.background="#000000",this.config.container.appendChild(this.canvas),this.input=document.createElement("input"),this.input.style.position="absolute",this.input.style.left="-9999px",this.input.style.top="0",this.input.style.width="1px",this.input.style.height="1px",this.input.style.opacity="0",this.config.container.appendChild(this.input),this.vim=new t({canvas:this.canvas,input:this.input,workerScriptPath:"/vim-wasm/vim.js"}),this.vim.onVimInit=()=>{this.vim.cmdline("set guifont=monospace:h14"),this.vim.cmdline("highlight Normal guibg=#000000 guifg=#cccccc"),this.vim.cmdline("highlight NonText guibg=#000000 guifg=#555555"),this.vim.cmdline("highlight StatusLine guibg=#333333 guifg=#cccccc gui=NONE"),this.vim.cmdline("highlight StatusLineNC guibg=#1a1a1a guifg=#666666 gui=NONE"),this.vim.cmdline("highlight LineNr guibg=#000000 guifg=#555555"),this.vim.cmdline("highlight CursorLine guibg=#111111"),this.vim.cmdline("highlight Visual guibg=#264f78"),this.vim.cmdline("highlight Pmenu guibg=#1a1a1a guifg=#cccccc"),this.vim.cmdline("highlight PmenuSel guibg=#264f78 guifg=#cccccc"),this.vim.cmdline("highlight VertSplit guibg=#000000 guifg=#333333")},this.vim.onVimExit=r=>{this.cleanup();for(const n of this.exitCallbacks)n(0)},this.vim.onError=r=>{console.error("vim.wasm error:",r),this.cleanup();for(const n of this.exitCallbacks)n(1)},this.vim.onFileExport=(r,n)=>{const o=new TextDecoder().decode(new Uint8Array(n)),c=this.vimPathToVfsPath.get(r);if(c)vt(c,o);else{const l=r.split("/").pop();l&&vt(F(this.config.cwd,l),o)}};const s={},i=[];if(this.config.args.length>0){const r=this.config.args[0],n=this.config.env.__FILE_CONTENT__??"",o=this.config.env.__VFS_PATH__??"",c=`/tmp/${r}`;s[c]=n,i.push(c),o&&this.vimPathToVfsPath.set(c,o)}i.push("-c","autocmd BufWritePost * silent! export"),this.vim.start({files:Object.keys(s).length>0?s:void 0,cmdArgs:i}),this.input.focus()}cleanup(){this.canvas&&(this.canvas.remove(),this.canvas=null),this.input&&(this.input.remove(),this.input=null),this.vim=null}write(t){}resize(t,s){if(this.canvas&&this.vim){const i=this.config.container.getBoundingClientRect();i.width>0&&i.height>0&&this.vim.resize(i.width,i.height)}}terminate(){if(this.vim)try{this.vim.cmdline("qa!")}catch{this.cleanup();for(const t of this.exitCallbacks)t(1)}}onOutput(t){this.outputCallbacks.push(t)}onExit(t){this.exitCallbacks.push(t)}}const Ot="rgb(204,204,204)",Et="rgb(0,0,0)",bt={char:" ",fg:Ot,bg:Et,bold:!1,italic:!1,underline:!1};gt("vim",e=>new yt(e));gt("vi",e=>new yt(e));gt("nvim",e=>new yt(e));function me(e){return`rgb(${e.fg_r},${e.fg_g},${e.fg_b})`}function ge(e){return`rgb(${e.bg_r},${e.bg_g},${e.bg_b})`}function xt(e,t,s){const i=e.getLine(t),r=[];if(i)for(let n=0;n<s;n++){const o=i[n];o?r.push({char:o.codepoint?String.fromCodePoint(o.codepoint):" ",fg:me(o),bg:ge(o),bold:!!(o.flags&1),italic:!!(o.flags&4),underline:!!(o.flags&8)}):r.push(bt)}else for(let n=0;n<s;n++)r.push(bt);return r}function ye(e){return e.some(t=>t.char!==" ")}function we({cwd:e,setCwd:t}){const s=f.useRef(null),i=f.useRef(null),r=f.useRef(null),[n,o]=f.useState([]),[c,l]=f.useState(""),[h,P]=f.useState(0),[k,I]=f.useState(""),[g,v]=f.useState(!0),[x,E]=f.useState({kind:"shell"}),M=f.useRef(null),L=f.useRef(null),R=f.useRef(null),H=f.useRef(x),K=f.useRef(e),D=f.useRef(t);f.useEffect(()=>{K.current=e},[e]),f.useEffect(()=>{D.current=t},[t]),f.useEffect(()=>{H.current=x},[x]),f.useEffect(()=>{x.kind==="shell"&&i.current?.focus()},[x]),f.useEffect(()=>{s.current&&x.kind==="shell"&&(s.current.scrollTop=s.current.scrollHeight)},[n,c,x]);const X=f.useCallback((u,a)=>{const d=pe(u);if(!d)return;const _=r.current;if(!_)return;const S={};if(a.length>0){const y=F(K.current,a[0]);S.__VFS_PATH__=y;const B=Dt(y);B!==null&&(S.__FILE_CONTENT__=B)}const $=d({wasmUrl:"",args:a,env:S,cwd:K.current,cols:R.current?.cols||80,rows:R.current?.rows||24,container:_}),T=()=>{_.replaceChildren(),E({kind:"shell"}),setTimeout(()=>{L.current?.printPrompt(),i.current?.focus()},0)};$.onExit(()=>T()),E({kind:"process",process:$,cleanup:T}),$.start().catch(y=>{console.error("Failed to start process:",y),T()})},[]);f.useEffect(()=>{let u=!1,a;const d=document.createElement("div");d.style.position="absolute",d.style.left="-9999px",d.style.top="-9999px",d.style.width="1px",d.style.height="1px",d.style.overflow="hidden",document.body.appendChild(d);async function _(){const{init:$,Terminal:T}=await kt(async()=>{const{init:C,Terminal:A}=await import("./ghostty-web-DiFcHhCM.js");return{init:C,Terminal:A}},__vite__mapDeps([0,1,2]));if(await $(),u)return;const y=new T({fontSize:14});y.open(d),R.current=y,M.current=y.wasmTerm;const B={write(C){y.write(C)}},w=new ue(B);L.current=w;const V=()=>{const C=M.current;if(!C)return;const A=y.cols||80,j=y.rows||24,jt=C.getCursor()?.y??0;let rt=-1;for(let U=j-1;U>=0;U--){const tt=xt(C,U,A);if(ye(tt)){rt=U;break}}if(rt>=0){const U=Math.max(rt,jt-1),tt=[];for(let G=0;G<=U;G++)tt.push(xt(C,G,A));o(G=>[...G,...tt])}y.write("\x1B[2J\x1B[H")};return w.setBeforePromptCallback(V),w.setInputChangeCallback((C,A,j)=>{l(C),P(A),I(j)}),w.setContextProvider(()=>({cwd:K.current,setCwd:C=>{K.current=C,D.current(C)},clearHistory:()=>o([]),runProcess:X,getCommandHistory:()=>w.getHistory()})),a=ce(B,w),de(B),V(),w.printPrompt(),()=>{y.dispose()}}let S;return _().then($=>{S=$}),()=>{u=!0,S?.(),a?.(),document.body.removeChild(d)}},[X]);function p(u){const a=L.current;if(!a||H.current.kind==="process")return;const d=/mac|iphone|ipad|ipod/i.test(navigator.userAgent);if(d?u.metaKey:u.ctrlKey){const S=new Set(["l","t","w","n","q","Tab","shift"]);if(u.shiftKey||S.has(u.key))return}u.metaKey&&d||(u.key==="Enter"?(u.preventDefault(),a.handleData("\r")):u.key==="Backspace"?(u.preventDefault(),a.handleData("")):u.key==="Tab"?(u.preventDefault(),a.handleData("	")):u.key==="ArrowUp"?(u.preventDefault(),a.handleData("\x1B[A")):u.key==="ArrowDown"?(u.preventDefault(),a.handleData("\x1B[B")):u.key==="ArrowRight"?(u.preventDefault(),a.handleData("\x1B[C")):u.key==="ArrowLeft"?(u.preventDefault(),a.handleData("\x1B[D")):u.key==="Home"?(u.preventDefault(),a.handleData("\x1B[H")):u.key==="End"?(u.preventDefault(),a.handleData("\x1B[F")):u.key==="Delete"?(u.preventDefault(),a.handleData("\x1B[3~")):u.ctrlKey&&u.key==="c"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="d"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="l"?(u.preventDefault(),a.handleData("\f")):u.ctrlKey&&u.key==="u"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="a"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="e"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="w"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="k"?(u.preventDefault(),a.handleData("\v")):u.ctrlKey&&u.key==="r"?(u.preventDefault(),a.handleData("")):u.ctrlKey&&u.key==="g"?(u.preventDefault(),a.handleData("\x07")):u.key==="Escape"?(u.preventDefault(),a.handleData("\x1B")):u.key.length===1&&!u.ctrlKey&&!u.metaKey&&(u.preventDefault(),a.handleData(u.key)))}function m(){x.kind==="shell"&&i.current?.focus()}return O.jsxs("div",{ref:s,onClick:m,className:`bg-black text-neutral-300 font-mono text-sm leading-[1.2] px-4 py-3 sm:px-[5vw] sm:py-[4vh] md:px-[8vw] md:py-[6vh] lg:px-[12vw] lg:py-[8vh] h-screen w-screen box-border cursor-text ${x.kind==="shell"?"overflow-auto":"overflow-hidden"}`,children:[x.kind==="shell"&&O.jsxs(O.Fragment,{children:[n.map((u,a)=>O.jsx("div",{className:"whitespace-pre min-h-[1.2em]",children:u.map((d,_)=>O.jsx("span",{className:[d.bold?"font-bold":"",d.italic?"italic":"",d.underline?"underline":""].filter(Boolean).join(" ")||void 0,style:{color:d.fg!==Ot?d.fg:void 0,backgroundColor:d.bg!==Et?d.bg:void 0},children:d.char},_))},`h${a}`)),O.jsxs("div",{className:"whitespace-pre min-h-[1.2em]",children:[O.jsx("span",{children:k}),O.jsx("span",{children:c.slice(0,h)}),O.jsx("span",{className:g?"animate-blink":void 0,style:{backgroundColor:g?"#d4d4d4":"#555"},children:c[h]??" "}),h<c.length&&O.jsx("span",{children:c.slice(h+1)})]}),O.jsx("textarea",{ref:i,onKeyDown:p,onFocus:()=>v(!0),onBlur:()=>v(!1),className:"absolute -left-[9999px] -top-[9999px] opacity-0 w-0 h-0 p-0 border-none",autoComplete:"off",spellCheck:!1,autoFocus:!0})]}),O.jsx("div",{ref:r,className:x.kind==="process"?"w-full h-full relative":"hidden"})]})}function be(){const e=Kt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=Jt.withDefault("/"),e[0]=t):t=e[0];const[s,i]=Xt("cwd",t);let r;e[1]!==s?(r=It(s)?s:"/",e[1]=s,e[2]=r):r=e[2];const n=r;let o;return e[3]!==i||e[4]!==n?(o=O.jsx(we,{cwd:n,setCwd:i}),e[3]=i,e[4]=n,e[5]=o):o=e[5],o}export{be as component};
